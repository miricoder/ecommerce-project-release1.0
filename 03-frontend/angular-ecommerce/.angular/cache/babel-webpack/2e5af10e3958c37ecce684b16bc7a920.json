{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _idxResponseParser = require(\"./idxResponseParser\");\n/*!\n * Copyright (c) 2021-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n\nvar makeIdxState = function makeIdxState(idxResponse, toPersist) {\n  var _rawIdxResponse$succe, _context2;\n\n  var rawIdxResponse = idxResponse;\n\n  var _parseIdxResponse = (0, _idxResponseParser.parseIdxResponse)(idxResponse, toPersist),\n      remediations = _parseIdxResponse.remediations,\n      context = _parseIdxResponse.context,\n      actions = _parseIdxResponse.actions;\n\n  var neededToProceed = (0, _toConsumableArray2.default)(remediations);\n\n  var proceed = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(remediationChoice) {\n      var paramsFromUser,\n          remediationChoiceObject,\n          _args = arguments;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              paramsFromUser = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n              /*\n              remediationChoice is the name attribute on each form\n              name should remain unique for items inside the remediation that are considered forms(identify, select-factor)\n              name can be duplicate for items like redirect where its not considered a form(redirect)\n              when names are not unique its a redirect to a href, so widget wont POST to idx-js layer.\n              */\n\n              remediationChoiceObject = (0, _find.default)(remediations).call(remediations, function (remediation) {\n                return remediation.name === remediationChoice;\n              });\n\n              if (remediationChoiceObject) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _promise.default.reject(\"Unknown remediation choice: [\".concat(remediationChoice, \"]\")));\n\n            case 4:\n              return _context.abrupt(\"return\", remediationChoiceObject.action(paramsFromUser));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function proceed(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var hasInteractionCode = function hasInteractionCode() {\n    return !!rawIdxResponse.successWithInteractionCode;\n  };\n\n  var findCode = function findCode(item) {\n    return item.name === 'interaction_code';\n  };\n\n  var interactionCode = (_rawIdxResponse$succe = rawIdxResponse.successWithInteractionCode) === null || _rawIdxResponse$succe === void 0 ? void 0 : (0, _find.default)(_context2 = _rawIdxResponse$succe.value).call(_context2, findCode).value;\n  return {\n    proceed: proceed,\n    neededToProceed: neededToProceed,\n    actions: actions,\n    context: context,\n    rawIdxState: rawIdxResponse,\n    hasInteractionCode: hasInteractionCode,\n    interactionCode: interactionCode,\n    toPersist: toPersist\n  };\n};\n\nvar _default = makeIdxState;\nexports.default = _default;","map":{"version":3,"sources":["/Users/miralimirzayev/Desktop/Spring/FULLStackDev_BOOT_CAMP/ecommerce-project-release1.0/03-frontend/angular-ecommerce/node_modules/@okta/okta-idx-js/src/v1/makeIdxState.js"],"names":["_Object$defineProperty","require","_interopRequireDefault","exports","value","default","_regenerator","_find","_promise","_asyncToGenerator2","_toConsumableArray2","_idxResponseParser","makeIdxState","idxResponse","toPersist","_rawIdxResponse$succe","_context2","rawIdxResponse","_parseIdxResponse","parseIdxResponse","remediations","context","actions","neededToProceed","proceed","_ref","mark","_callee","remediationChoice","paramsFromUser","remediationChoiceObject","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","call","remediation","name","abrupt","reject","concat","action","stop","_x","apply","hasInteractionCode","successWithInteractionCode","findCode","item","interactionCode","rawIdxState","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _idxResponseParser = require(\"./idxResponseParser\");\n\n/*!\n * Copyright (c) 2021-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nvar makeIdxState = function makeIdxState(idxResponse, toPersist) {\n  var _rawIdxResponse$succe, _context2;\n\n  var rawIdxResponse = idxResponse;\n\n  var _parseIdxResponse = (0, _idxResponseParser.parseIdxResponse)(idxResponse, toPersist),\n      remediations = _parseIdxResponse.remediations,\n      context = _parseIdxResponse.context,\n      actions = _parseIdxResponse.actions;\n\n  var neededToProceed = (0, _toConsumableArray2.default)(remediations);\n\n  var proceed = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(remediationChoice) {\n      var paramsFromUser,\n          remediationChoiceObject,\n          _args = arguments;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              paramsFromUser = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n              /*\n              remediationChoice is the name attribute on each form\n              name should remain unique for items inside the remediation that are considered forms(identify, select-factor)\n              name can be duplicate for items like redirect where its not considered a form(redirect)\n              when names are not unique its a redirect to a href, so widget wont POST to idx-js layer.\n              */\n              remediationChoiceObject = (0, _find.default)(remediations).call(remediations, function (remediation) {\n                return remediation.name === remediationChoice;\n              });\n\n              if (remediationChoiceObject) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _promise.default.reject(\"Unknown remediation choice: [\".concat(remediationChoice, \"]\")));\n\n            case 4:\n              return _context.abrupt(\"return\", remediationChoiceObject.action(paramsFromUser));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function proceed(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var hasInteractionCode = function hasInteractionCode() {\n    return !!rawIdxResponse.successWithInteractionCode;\n  };\n\n  var findCode = function findCode(item) {\n    return item.name === 'interaction_code';\n  };\n\n  var interactionCode = (_rawIdxResponse$succe = rawIdxResponse.successWithInteractionCode) === null || _rawIdxResponse$succe === void 0 ? void 0 : (0, _find.default)(_context2 = _rawIdxResponse$succe.value).call(_context2, findCode).value;\n  return {\n    proceed: proceed,\n    neededToProceed: neededToProceed,\n    actions: actions,\n    context: context,\n    rawIdxState: rawIdxResponse,\n    hasInteractionCode: hasInteractionCode,\n    interactionCode: interactionCode,\n    toPersist: toPersist\n  };\n};\n\nvar _default = makeIdxState;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}